#!/usr/bin/groovy
// Jenkins job: APIServer_Pipeline

import groovy.json.JsonSlurperClassic

repositoryUrl = "https://github.com/buildit/jenkins-pipeline-examples.git"
script = "pipelines/meta-pipeline.groovy"
branch = "development"

source = "development"
target = "stable"

def label = "node-${UUID.randomUUID().toString()}"
podTemplate(label: label) {
    node(label) {
        stage('Run shell') {
            container('mycontainer') {
                git url: repositoryUrl, credentialsId: "git-credentials", branch: branch
                load script
            }
        }
    }
}

